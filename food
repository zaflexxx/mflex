-- Main loop to walk to food and check quantities
while true do
    if AllFoodsAtTarget() then
        print("All foods at target quantity. Returning to macro spot...")
        MoveToTarget(macroSpot)  -- Return to macro spot with exact position check
        print("Returned to macro spot.")
        break
    else
        UpdateFoodDistances()
        
        for _, foodData in ipairs(foodDistances) do
            local foodName = foodData.name
            print("Pathfinding to: " .. foodName)
            local targetPart = foodData.object:FindFirstChild("Head") or foodData.object:FindFirstChild("PrimaryPart") or foodData.object:FindFirstChildWhichIsA("BasePart")
            
            if targetPart then
                MoveToTarget(targetPart.Position)  -- Move to the food spot directly with exact position check
                print("Reached " .. foodName .. " spot. Waiting for quantity...")
                
                repeat
                    wait(1)
                    local quantity = CheckFoodQuantity(foodName)
                    print(foodName .. " quantity: " .. quantity)
                until quantity >= targetQuantity
                
                print(foodName .. " has reached the target quantity.")
            end
        end
    end
    wait(5)  -- Small delay before checking the next food item
end
